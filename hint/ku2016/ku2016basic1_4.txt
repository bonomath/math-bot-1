変数変換をすると良さそうですね．最大値に関してはいい感じの方向に飛ばしてやりましょう．
